.. _resources:


=========
Resources
=========

.. _input:

Input data
==========

+-----------------------------+-------------+-----------+----------------------+
| Variable                    | Short name  | Unit      | Comment              |
+=============================+=============+===========+======================+
| Air pressure                | PRES        | hPa       |                      |
+-----------------------------+-------------+-----------+----------------------+
| Air temperature             | T2          | K         |                      |
+-----------------------------+-------------+-----------+----------------------+
| Cloud cover                 | N           | \-        |                      |
+-----------------------------+-------------+-----------+----------------------+
| Relative humidity           | RH2         | %/100     |                      |
+-----------------------------+-------------+-----------+----------------------+
| Solar radiation             | G           | |W m^-2|  |                      |
+-----------------------------+-------------+-----------+----------------------+
| Total precipitation         | RRR         | mm        |                      |
+-----------------------------+-------------+-----------+----------------------+
| Wind speed                  | U2          | |m s^-1|  |                      |
+-----------------------------+-------------+-----------+----------------------+
| Snowfall                    | SNOWFALL    | m         | optional             |
+-----------------------------+-------------+-----------+----------------------+
| Incoming longwave radiation | LWin        | |W m^-2|  | optional, replaces N |
+-----------------------------+-------------+-----------+----------------------+


.. _static:

Static fields
=============
     
+---------------+-------------+-----------+--------------------+
| Variable      | Short name  | Unit      | Comment            |
+===============+=============+===========+====================+
| Glacier mask  | MASK        | Boolean   | glacier == True    |
+---------------+-------------+-----------+--------------------+
| Elevation     | HGT         | m         |                    |
+---------------+-------------+-----------+--------------------+

.. _output:

Output data
===========

+------------------------------+-------------------------+--------------+---------------+
| Variable                     | Short name              | Unit         | Comment       |
+==============================+=========================+==============+===============+
| Incoming shortwave radiation | G                       | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Incoming longwave radiation  | LWout                   | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Outgoing longwave radiation  | LWout                   | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Liquid precipitation         | RAIN                    | mm           | requires RRR  |
+------------------------------+-------------------------+--------------+---------------+
| Snowfall                     | SNOWFALL                | mm           |               |
+------------------------------+-------------------------+--------------+---------------+
| Sensible heat flux           | H                       | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Latent heat flux             | LE                      | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Ground heat flux             | B                       | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Rain heat flux               | QRR                     | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Mass balance                 | MB                      | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Surface mass balance         | surfMB                  | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Internal mass balance        | intMB                   | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Runoff                       | Q                       | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Snow height                  | SNOWHEIGHT              | m            |               |
+------------------------------+-------------------------+--------------+---------------+
| Total domain height          | TOTALHEIGHT             | m            |               |
+------------------------------+-------------------------+--------------+---------------+
| Surface temperature          | TS                      | K            |               |
+------------------------------+-------------------------+--------------+---------------+
| Albedo                       | ALBEDO                  | \-           |               |
+------------------------------+-------------------------+--------------+---------------+
| Number of layers             | LAYERS                  | \-           |               |
+------------------------------+-------------------------+--------------+---------------+
| Available melt energy        | ME                      | |W m^-2|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Evaporation                  | EVAPORATION             | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Condensation                 | CONDENSATION            | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Sublimation                  | SUBLIMATION             | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Deposition                   | DEPOSITION              | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Refreezing                   | REFREEZING              | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Subsurface melt              | subM                    | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Surface melt                 | surfM                   | |m w.e.|     |               |
+------------------------------+-------------------------+--------------+---------------+
| Roughness length             | Z0                      | m            |               |
+------------------------------+-------------------------+--------------+---------------+
| Layer height                 | LAYER_HEIGHT            | m            | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer temperature            | LAYER_T                 | m            | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer density                | LAYER_RHO               | |kg m^-3|    | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer ice fraction           | LAYER_ICE_FRACTION      | \-           | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer porosity               | LAYER_POROSITY          | \-           | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer liquid water content   | LAYER_LWC               | \-           | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer irreducible water      | LAYER_IRREDUCIBLE_WATER | \-           | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer refreezing             | LAYER_REFREEZE          | |m w.e.|     | Profile       |
+------------------------------+-------------------------+--------------+---------------+
| Layer cold content           | LAYER_CC                | |J m^-2|     | Profile       |
+------------------------------+-------------------------+--------------+---------------+


.. _directories:

Source directory structure
==========================

+-------------------------+------------------------------------+---------------------------------------------------------------+
| Directory               | File                               | Description                                                   |
+=========================+====================================+===============================================================+
| ./                      | COSIPY.py                          | Main program                                                  |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | config.toml                        | Model configuration                                           |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | constants.toml                     | Constants configuration                                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | utilities_config.toml              | Utilities configuration                                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | slurm_config.toml                  | Slurm Workload Manager configuration                          |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | README.md                          | Readme file                                                   |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./dask-worker-space     |                                    | Folder needed for parallel computing and resulting log files  |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./data                  | input/Zhadang_ERA5_2009_2018.csv   | Example meteorological data (tutorial)                        |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | input/Zhadang_ERA5_2009.nc         | Example cosipy input file (tutorial)                          |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | output/                            | Output files (automatically created)                          |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | restart/                           | Restart files (automatically created)                         |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | static/static.nc                   | Example cosipy static file (tutorial)                         |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | static/DEM/n30_e090_3arc_v2.tif    | Example DEM file (tutorial)                                   |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | static/Shapefiles/Zhadang_RGI6.*   | Example rgi6 glacier outline (tutorial)                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./cosipy                | config.py                          | Configuration hook                                            |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | constants.py                       | Constants hook                                                |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./cosipy/cpkernel       | cosipy_core.py                     | Solves the 1D simulations                                     |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | init.py                            | Initialises the snowpack                                      |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | grid.py                            | GRID class                                                    |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | io.py                              | IO class                                                      |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | node.py                            | Node class                                                    |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./cosipy/modules        | albedo.py                          | Albedo module                                                 |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | densification.py                   | Densification module                                          |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | evaluation.py                      | Stake evaluation module                                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | heatEquation.py                    | Solves the heat equation                                      |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | penetratingRadiation.py            | Penetrating radiation module                                  |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | percolation.py                     | Percolation module                                            |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | radCor.py                          | Radiation module (used for preprocessing)                     |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | refreezing.py                      | Refreezing of water                                           |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | roughness.py                       | Roughness parametrisation                                     |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | secant.py                          | Provides the secant minimisation scheme                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | surfaceTemperature.py              | Solves the surface energy balance / surface temperature       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./cosipy/postprocessing | plot_cosipy_fields.py              | Quick visualisation of results                                |
+-------------------------+------------------------------------+---------------------------------------------------------------+
| ./cosipy/utilities      | aws2cosipy/aws2cosipy.py           | Creates a COSIPY input file from a data file                  |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | createStatic/create_static_file.py | Utility to create the static input data                       |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | setup_cosipy/setup_cosipy.py       | Create configuration files                                    |
+-------------------------+------------------------------------+---------------------------------------------------------------+
|                         | wrf2cosipy/wrf2cosipy.py           | Create an input file from WRF model output                    |
+-------------------------+------------------------------------+---------------------------------------------------------------+
